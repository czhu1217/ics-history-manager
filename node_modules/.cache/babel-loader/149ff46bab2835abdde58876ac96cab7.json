{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = CarouselImage;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames2 = _interopRequireDefault(require(\"classnames\"));\n\nvar _utils = require(\"../../libs/utils\");\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _AssistiveText = _interopRequireDefault(require(\"../AssistiveText\"));\n\nvar _context = require(\"../CarouselCard/context\");\n\nvar _utils2 = require(\"../CarouselCard/utils\");\n\nrequire(\"./styles.css\");\n/* eslint-disable react/prop-types */\n\n\nvar Item =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(Item, _Component);\n\n  function Item(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Item);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(Item).call(this, props));\n    _this.carouselImageID = (0, _utils.uniqueId)('carousel-content-id');\n    _this.carouselIndicatorID = (0, _utils.uniqueId)('indicator-id');\n    _this.itemRef = _react[\"default\"].createRef();\n    _this.state = {\n      activeItem: undefined,\n      prevActiveItem: undefined\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Item, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          privateRegisterChild = _this$props.privateRegisterChild,\n          header = _this$props.header;\n      return setTimeout(function () {\n        return privateRegisterChild({\n          containerID: _this2.carouselImageID,\n          indicatorID: _this2.carouselIndicatorID,\n          ref: _this2.itemRef,\n          header: header\n        });\n      }, 0);\n    }\n  }, {\n    key: \"getContainerClassName\",\n    value: function getContainerClassName() {\n      var _classnames;\n\n      var className = this.props.className;\n      return (0, _classnames2[\"default\"])('rainbow-carousel-image_container', (_classnames = {}, (0, _defineProperty2[\"default\"])(_classnames, \"rainbow-carousel-image--slide-in_\".concat(this.getAnimationDirection()), this.shouldShow()), (0, _defineProperty2[\"default\"])(_classnames, \"rainbow-carousel-image--slide-out_\".concat(this.getAnimationDirection()), this.shouldHide()), (0, _defineProperty2[\"default\"])(_classnames, 'rainbow-carousel-image--active', this.shouldBeActive()), _classnames), className);\n    }\n  }, {\n    key: \"getAnimationDirection\",\n    value: function getAnimationDirection() {\n      var _this$props2 = this.props,\n          childrenRegistred = _this$props2.childrenRegistred,\n          isAnimationPaused = _this$props2.isAnimationPaused;\n      var _this$state = this.state,\n          activeItem = _this$state.activeItem,\n          prevActiveItem = _this$state.prevActiveItem;\n\n      if (isAnimationPaused) {\n        var activeItemIndex = (0, _utils2.getItemIndex)(childrenRegistred, activeItem);\n        var prevItemIndex = (0, _utils2.getItemIndex)(childrenRegistred, prevActiveItem);\n\n        if (activeItemIndex === 0 && prevItemIndex === childrenRegistred.length - 1) {\n          return 'right-to-left';\n        } else if (prevItemIndex === 0 && activeItemIndex === childrenRegistred.length - 1) {\n          return 'left-to-right';\n        } else if (activeItemIndex > prevItemIndex) {\n          return 'right-to-left';\n        }\n\n        return 'left-to-right';\n      }\n\n      return 'right-to-left';\n    }\n  }, {\n    key: \"getTabIndex\",\n    value: function getTabIndex() {\n      var activeItem = this.props.activeItem;\n\n      if (activeItem === this.carouselIndicatorID) {\n        return 0;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"getAriaHidden\",\n    value: function getAriaHidden() {\n      var activeItem = this.props.activeItem;\n      return activeItem !== this.carouselIndicatorID;\n    }\n  }, {\n    key: \"getImageSrc\",\n    value: function getImageSrc() {\n      var src = this.props.src;\n      return {\n        backgroundImage: \"url(\".concat(src, \")\")\n      };\n    }\n  }, {\n    key: \"shouldShow\",\n    value: function shouldShow() {\n      var _this$state2 = this.state,\n          activeItem = _this$state2.activeItem,\n          prevActiveItem = _this$state2.prevActiveItem;\n      var areTheSame = activeItem === prevActiveItem;\n      if (areTheSame) return false;\n      return activeItem === this.carouselIndicatorID;\n    }\n  }, {\n    key: \"shouldHide\",\n    value: function shouldHide() {\n      var _this$state3 = this.state,\n          activeItem = _this$state3.activeItem,\n          prevActiveItem = _this$state3.prevActiveItem;\n      var isNotActive = activeItem !== this.carouselIndicatorID;\n      var itWasActive = prevActiveItem === this.carouselIndicatorID;\n      return isNotActive && itWasActive;\n    }\n  }, {\n    key: \"shouldBeActive\",\n    value: function shouldBeActive() {\n      var _this$state4 = this.state,\n          activeItem = _this$state4.activeItem,\n          prevActiveItem = _this$state4.prevActiveItem;\n      var areTheSame = activeItem === prevActiveItem;\n      var isSelected = activeItem === this.carouselIndicatorID;\n      return areTheSame && isSelected;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          assistiveText = _this$props3.assistiveText,\n          description = _this$props3.description,\n          header = _this$props3.header,\n          href = _this$props3.href,\n          style = _this$props3.style;\n      var hasContent = !!(header || description);\n      return _react[\"default\"].createElement(\"div\", {\n        id: this.carouselImageID,\n        className: this.getContainerClassName(),\n        role: \"tabpanel\",\n        \"aria-hidden\": this.getAriaHidden(),\n        \"aria-labelledby\": this.carouselIndicatorID,\n        style: style\n      }, _react[\"default\"].createElement(\"a\", {\n        href: href,\n        className: \"rainbow-carousel-image\",\n        tabIndex: this.getTabIndex(),\n        ref: this.itemRef\n      }, _react[\"default\"].createElement(\"div\", {\n        className: \"rainbow-carousel-image_content-image-container\"\n      }, _react[\"default\"].createElement(\"div\", {\n        className: \"rainbow-carousel-image_image\",\n        style: this.getImageSrc()\n      }), _react[\"default\"].createElement(_AssistiveText[\"default\"], {\n        text: assistiveText\n      }), _react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: hasContent\n      }, _react[\"default\"].createElement(\"div\", {\n        className: \"rainbow-carousel-image_content\"\n      }, _react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: !!header\n      }, _react[\"default\"].createElement(\"h2\", {\n        className: \"rainbow-carousel-image_content-title\"\n      }, header)), _react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: !!description\n      }, _react[\"default\"].createElement(\"p\", null, description)))))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var activeItem = props.activeItem;\n      var stateActiveItem = state.activeItem;\n      var newState = {\n        activeItem: activeItem,\n        prevActiveItem: stateActiveItem\n      };\n      var isNotTheSameActive = state.activeItem !== newState.activeItem;\n      var isNotTheSamePrev = state.prevActiveItem !== newState.prevActiveItem;\n      var isNotTheSameState = isNotTheSameActive || isNotTheSamePrev;\n\n      if (isNotTheSameState) {\n        return newState;\n      }\n\n      return null;\n    }\n  }]);\n  return Item;\n}(_react.Component);\n\nfunction CarouselImage(props) {\n  return _react[\"default\"].createElement(_context.Consumer, null, function (value) {\n    return _react[\"default\"].createElement(Item, (0, _extends2[\"default\"])({}, props, value));\n  });\n}\n\nCarouselImage.propTypes = {\n  /** The URL for the image. */\n  src: _propTypes[\"default\"].string,\n\n  /** The header can include text or another component,\n   * and is displayed in the top of the content section. */\n  header: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** The description can include text or another component,\n   * and is displayed below the header in the content section. */\n  description: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** A description for assistive sreen readers. */\n  assistiveText: _propTypes[\"default\"].string,\n\n  /** The URL of the page that the card goes to. */\n  href: _propTypes[\"default\"].string,\n\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object\n};\nCarouselImage.defaultProps = {\n  src: undefined,\n  header: undefined,\n  description: undefined,\n  assistiveText: undefined,\n  href: undefined,\n  className: undefined,\n  style: undefined\n};","map":null,"metadata":{},"sourceType":"script"}